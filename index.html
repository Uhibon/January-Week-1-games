<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Booha Drag & Drop – January Week 1</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Sans+JP:wght@500&display=swap" rel="stylesheet">
<style>
:root{
  --dark:#0b1530;
  --green:#38d96f;
  --red:#e53935;
  --pink:#ff7eb9;
  --blue:#5ee6ff;
  --orange:#ffad33;
  --gold:#ffd166;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:var(--dark);color:#fff;font-family:'Noto Sans JP',sans-serif;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:100vh;overflow:hidden;text-align:center;
}
h1{font-family:'Cinzel',serif;margin-bottom:10px;}
#game,#results{width:100%;max-width:800px;display:none;flex-direction:column;align-items:center;}
#round{display:flex;justify-content:center;gap:40px;flex-wrap:wrap;width:100%;margin-top:20px;}
.column{display:flex;flex-direction:column;gap:15px;flex:1;min-width:200px;}
.card{
  background:rgba(255,255,255,0.1);
  border-radius:20px;padding:20px;min-height:80px;
  display:flex;align-items:center;justify-content:center;
  font-size:clamp(1.4rem,4vw,2.2rem);
  transition:transform .2s,background .3s;
}
.card.dragging{opacity:0.5;transform:scale(1.05);}
.card.correct{background:var(--green);}
.card.wrong{background:var(--red);animation:shake .4s;}
@keyframes shake{
  0%,100%{transform:translateX(0);}
  25%{transform:translateX(-8px);}
  75%{transform:translateX(8px);}
}
button{
  margin-top:25px;padding:12px 40px;border:none;border-radius:30px;
  background:var(--pink);color:#fff;font-weight:bold;font-size:1.2rem;cursor:pointer;
  transition:.3s;
}
button:hover{background:var(--blue);color:#000;}
#checkBtn:disabled{opacity:.4;cursor:not-allowed;}
#results h2{font-family:'Cinzel',serif;font-size:2rem;margin-bottom:20px;}
.redGlow{background:#c00;box-shadow:0 0 40px 20px #f00 inset;}
.orangeGlow{background:#ff7b00;box-shadow:0 0 40px 20px #ff7b00 inset;}
.blueGlow{background:#0066ff;box-shadow:0 0 40px 20px #00f inset;}
.goldGlow{background:#ffd700;box-shadow:0 0 60px 25px #ffd700 inset;}
.confetti{
  position:fixed;width:10px;height:10px;border-radius:50%;
  animation:fall 1s linear forwards;
}
@keyframes fall{
  0%{transform:translateY(0) rotate(0);}
  100%{transform:translateY(400px) rotate(720deg);}
}
</style>
</head>
<body>

<h1>January Week 1 – Drag & Drop Match-Up</h1>

<div id="game">
  <div id="round"></div>
  <button id="checkBtn" disabled>CHECK</button>
</div>

<div id="results">
  <h2 id="resultMsg"></h2>
  <button onclick="restart()">Play Again</button>
</div>

<!-- audio placeholders -->
<audio id="ding" src="assets/audio/ding.mp3"></audio>
<audio id="fart" src="assets/audio/fart.mp3"></audio>
<audio id="res05" src="assets/audio/result_0-5.mp3"></audio>
<audio id="res610" src="assets/audio/result_6-10.mp3"></audio>
<audio id="res1114" src="assets/audio/result_11-14.mp3"></audio>
<audio id="res15" src="assets/audio/result_15.mp3"></audio>

<script>
const VOCAB=[
{en:"goal",jp:"目標",hira:"もくひょう"},
{en:"plan",jp:"計画",hira:"けいかく"},
{en:"future",jp:"未来",hira:"みらい"},
{en:"dream",jp:"夢",hira:"ゆめ"},
{en:"challenge",jp:"挑戦",hira:"ちょうせん"},
{en:"try",jp:"挑戦する",hira:"ちょうせん する"},
{en:"change",jp:"変える",hira:"かえる"},
{en:"habit",jp:"習慣",hira:"しゅうかん"},
{en:"exercise",jp:"運動",hira:"うんどう"},
{en:"study",jp:"勉強",hira:"べんきょう"},
{en:"learn",jp:"学ぶ",hira:"まなぶ"},
{en:"practice",jp:"練習",hira:"れんしゅう"},
{en:"success",jp:"成功",hira:"せいこう"},
{en:"focus",jp:"集中",hira:"しゅうちゅう"},
{en:"motivation",jp:"やる気",hira:"やるき"}
];

let round=1,score=0,connections={},locked=false;

function shuffle(a){return a.sort(()=>Math.random()-0.5);}

function startGame(){
  round=1;score=0;document.body.className="";
  document.getElementById("results").style.display="none";
  document.getElementById("game").style.display="flex";
  loadRound();
}

function loadRound(){
  connections={};locked=false;
  document.getElementById("checkBtn").disabled=true;
  const start=(round-1)*5;
  const set=shuffle(VOCAB).slice(start,start+5);
  const leftCol=document.createElement("div");
  leftCol.className="column";
  const rightCol=document.createElement("div");
  rightCol.className="column";
  const jpList=shuffle([...set]);

  set.forEach(item=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=item.en;
    div.draggable=true;
    div.dataset.en=item.en;
    div.addEventListener("dragstart",dragStart);
    leftCol.appendChild(div);
  });

  jpList.forEach(item=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=`${item.jp}\n(${item.hira})`;
    div.dataset.jp=item.jp;
    div.addEventListener("dragover",allowDrop);
    div.addEventListener("drop",drop);
    rightCol.appendChild(div);
  });

  const area=document.getElementById("round");
  area.innerHTML="";
  area.appendChild(leftCol);
  area.appendChild(rightCol);
}

function dragStart(e){e.dataTransfer.setData("text",e.target.dataset.en);}

function allowDrop(e){e.preventDefault();}

function drop(e){
  e.preventDefault();
  if(locked)return;
  const enWord=e.dataTransfer.getData("text");
  const enCard=document.querySelector(`[data-en='${enWord}']`);
  if(!enCard)return;
  e.target.textContent=enWord+"  /  "+e.target.textContent;
  e.target.dataset.connected=enWord;
  enCard.style.visibility="hidden";
  connections[e.target.dataset.jp]=enWord;
  if(Object.keys(connections).length===5)
    document.getElementById("checkBtn").disabled=false;
}

document.getElementById("checkBtn").onclick=()=>{
  locked=true;
  gradeRound();
};

function gradeRound(){
  const jpCards=document.querySelectorAll("[data-jp]");
  let i=0;
  const ding=document.getElementById("ding");
  const fart=document.getElementById("fart");

  const interval=setInterval(()=>{
    if(i>=jpCards.length){
      clearInterval(interval);
      setTimeout(nextRound,1000);
      return;
    }
    const card=jpCards[i];
    const jp=card.dataset.jp;
    const en=connections[jp];
    const correct=VOCAB.find(v=>v.en===en&&v.jp===jp);
    if(correct){
      card.classList.add("correct");
      ding.currentTime=0;ding.play();
      confetti();
      score++;
    }else{
      card.classList.add("wrong");
      fart.currentTime=0;fart.play();
    }
    i++;
  },800);
}

function nextRound(){
  round++;
  if(round<=3){loadRound();}
  else{showResults();}
}

function showResults(){
  document.getElementById("game").style.display="none";
  const res=document.getElementById("results");
  res.style.display="flex";
  const msg=document.getElementById("resultMsg");
  const r05=document.getElementById("res05");
  const r610=document.getElementById("res610");
  const r1114=document.getElementById("res1114");
  const r15=document.getElementById("res15");

  if(score<=5){
    document.body.className="redGlow";
    msg.textContent="OH! You didn’t look at the Boo-riculum!!";
    r05.play();
  }else if(score<=10){
    document.body.className="orangeGlow";
    msg.textContent="Too much YouTube and not enough Boo-riculum.";
    r610.play();
  }else if(score<=14){
    document.body.className="blueGlow";
    msg.textContent="Good job! Try for a perfect score.";
    r1114.play();
  }else{
    document.body.className="goldGlow";
    msg.textContent="Wow, you are the smartest person on earth!";
    r15.play();
    for(let i=0;i<100;i++)setTimeout(confetti,i*20);
  }
}

function restart(){startGame();}

function confetti(){
  const c=document.createElement("div");
  c.className="confetti";
  c.style.background=`hsl(${Math.random()*360},100%,60%)`;
  c.style.left=Math.random()*window.innerWidth+"px";
  c.style.top="-10px";
  c.style.animationDuration=0.8+Math.random()*0.5+"s";
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),1200);
}

startGame();
</script>
</body>
</html>
