<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>The Boo-riculum Games & Quizzes – January Week 1 Matching</title>
<link rel="icon" type="image/png" href="booha-ghost.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
<style>
  :root{
    --ink:#0e1020;--muted:#667085;--paper:#ffffffee;--bg:#0b1530;
    --accent:#7c3aed;--good:#11b981;--bad:#ef4444;--gold:#f59e0b;
    --en:#2dd4bf;--jp:#60a5fa;--card:#121a39;--ring:rgba(255,255,255,.12);
    --radius:22px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans JP,Helvetica,Arial,sans-serif;background:var(--bg);color:#f5f7ff;overflow-x:hidden}

  /* Animated Booha stripes background */
  body::before{
    content:"";position:fixed;inset:0;z-index:-2;
    background: repeating-linear-gradient( 45deg,
      rgba(124,58,237,.15) 0 28px,
      rgba(45,212,191,.15) 28px 56px,
      rgba(96,165,250,.15) 56px 84px,
      rgba(245,158,11,.15) 84px 112px
    );
    filter:saturate(120%) blur(0.3px);
    animation: slide 24s linear infinite;
  }
  @keyframes slide{from{background-position:0 0}to{background-position:1200px 0}}

  /* Floating Booha ghost */
  .ghost{position:fixed;right:3vw;top:12vh;width:72px;height:72px;border-radius:44px 44px 24px 24px;background:#fff;box-shadow:0 10px 30px rgba(0,0,0,.25);z-index:5;animation:wobble 4s ease-in-out infinite}
  .ghost::before,.ghost::after{content:"";position:absolute;border-radius:50%;background:#000}
  .ghost::before{width:14px;height:14px;left:18px;top:22px;box-shadow:22px 0 0 0 #000}
  .ghost::after{width:8px;height:8px;left:22px;top:26px;background:#f8f8f8;box-shadow:22px 0 0 0 #f8f8f8}
  .gh-waves{position:absolute;bottom:-10px;left:0;right:0;height:12px;background:radial-gradient(circle at 10px 6px,#fff 9px,transparent 10px) repeat-x;background-size:24px 12px}
  @keyframes wobble{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
  .ghost.happy{box-shadow:0 0 0 4px rgba(17,185,129,.35),0 14px 40px rgba(17,185,129,.3)}
  .ghost.sad{box-shadow:0 0 0 4px rgba(239,68,68,.35),0 14px 40px rgba(239,68,68,.3)}

  header{padding:24px 6vw 10px;text-align:center}
  .title{font-family:Cinzel,serif;font-weight:900;letter-spacing:.5px;font-size:clamp(22px,4vw,40px);}
  .title .thin{font-weight:700;opacity:.95}
  .subtitle{margin-top:6px;color:#cbd5ff;opacity:.9}

  .hud{display:flex;gap:14px;justify-content:center;align-items:center;margin:14px 0 8px;flex-wrap:wrap}
  .chip{background:rgba(255,255,255,.08);border:1px solid var(--ring);padding:8px 12px;border-radius:999px;font-weight:600}
  .bar{position:relative;height:12px;background:rgba(255,255,255,.12);border-radius:999px;overflow:hidden;width:min(680px,86vw);margin:10px auto}
  .bar>i{position:absolute;inset:0;transform-origin:left;width:0;background:linear-gradient(90deg,var(--good),#34d399,#a7f3d0);box-shadow:inset 0 0 10px rgba(255,255,255,.3)}

  .board{width:min(1100px,94vw);margin:20px auto 80px;display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}
  .card{position:relative;height:140px;border-radius:var(--radius);background:var(--card);border:1px solid var(--ring);cursor:pointer;transform-style:preserve-3d;transition:transform .5s ease,filter .3s ease;box-shadow:0 6px 18px rgba(0,0,0,.25)}
  .card:hover{filter:brightness(1.05)}
  .card.flipped{transform:rotateY(180deg)}
  .card.matched{cursor:default;outline:2px solid var(--good);box-shadow:0 0 0 4px rgba(17,185,129,.25),0 10px 30px rgba(17,185,129,.25)}

  .face{position:absolute;inset:0;padding:12px 10px;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;gap:6px;text-align:center;backface-visibility:hidden}
  .front{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));}
  .back{transform:rotateY(180deg);background:linear-gradient(180deg,rgba(255,255,255,.09),rgba(255,255,255,.03));}

  .enText{font-weight:800;font-size:22px;line-height:1.1;color:var(--en);text-shadow:0 1px 0 rgba(0,0,0,.4)}
  .jpBox{display:flex;flex-direction:column;gap:6px}
  .jp{font-weight:800;font-size:22px;line-height:1.1;color:var(--jp)}
  .hira{font-size:14px;color:#c7d2fe;opacity:.9}

  .legend{display:flex;gap:12px;justify-content:center;align-items:center;margin:12px auto 0;opacity:.9}
  .dot{width:12px;height:12px;border-radius:50%}

  .controls{display:flex;gap:12px;justify-content:center;margin:20px auto}
  button{appearance:none;border:1px solid var(--ring);background:rgba(255,255,255,.08);color:#fff;padding:10px 14px;border-radius:999px;font-weight:700;letter-spacing:.3px;cursor:pointer;transition:filter .2s ease,transform .04s ease;box-shadow:0 8px 22px rgba(0,0,0,.2),inset 0 0 20px rgba(255,255,255,.04)}
  button:hover{filter:brightness(1.1)}
  button:active{transform:translateY(1px)}
  .primary{background:linear-gradient(90deg,#7c3aed,#6366f1);}

  /* Confetti */
  .confetti{position:fixed;inset:0;pointer-events:none;z-index:40}
  .confetti i{position:absolute;width:8px;height:14px;background:#fff;opacity:.9;will-change:transform}

  /* Toast */
  .toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:#0f172a;color:#e2e8f0;border:1px solid var(--ring);padding:10px 14px;border-radius:999px;font-weight:700;box-shadow:0 10px 30px rgba(0,0,0,.35);opacity:0;pointer-events:none}
  .toast.show{animation:toast 1.3s ease}
  @keyframes toast{0%{opacity:0;transform:translate(-50%,6px)}10%,80%{opacity:1;transform:translate(-50%,0)}100%{opacity:0;transform:translate(-50%,-6px)}}

  footer{position:fixed;right:12px;bottom:10px;color:#c7cffb;opacity:.7;font-size:12px}
</style>
</head>
<body>
  <div class="ghost" aria-hidden="true"><div class="gh-waves"></div></div>

  <header>
    <div class="title">The <span class="thin">Boo-riculum</span> Games & Quizzes</div>
    <div class="subtitle">January Week 1 · Matching Game（英語⇄日本語）</div>
    <div class="hud">
      <div class="chip" id="moves">Moves: 0</div>
      <div class="chip" id="pairs">Pairs: 0 / 15</div>
      <div class="chip" id="timer">Time: 0:00</div>
    </div>
    <div class="bar"><i id="progress"></i></div>
    <div class="legend">
      <span class="dot" style="background:var(--en)"></span> EN cards
      <span class="dot" style="background:var(--jp)"></span> JP cards
    </div>
  </header>

  <main class="board" id="board" aria-live="polite"></main>

  <div class="controls">
    <button class="primary" id="newGame">New Game</button>
    <button id="revealAll">Peek (3s)</button>
    <button id="soundToggle">Sound: On</button>
  </div>

  <div class="confetti" id="confetti"></div>
  <div class="toast" id="toast">Good job!</div>

  <footer>© Booha · Matching Game Prototype</footer>

<script>
// -------------------- Data (January Week 1) --------------------
const VOCAB = [
  { id:"goal", en:"goal", jp:"目標", hira:"もくひょう" },
  { id:"plan", en:"plan", jp:"計画", hira:"けいかく" },
  { id:"future", en:"future", jp:"未来", hira:"みらい" },
  { id:"dream", en:"dream", jp:"夢", hira:"ゆめ" },
  { id:"challenge", en:"challenge", jp:"挑戦", hira:"ちょうせん" },
  { id:"try", en:"try", jp:"挑戦する", hira:"ちょうせん する" },
  { id:"change", en:"change", jp:"変える", hira:"かえる" },
  { id:"habit", en:"habit", jp:"習慣", hira:"しゅうかん" },
  { id:"exercise", en:"exercise", jp:"運動", hira:"うんどう" },
  { id:"study", en:"study", jp:"勉強", hira:"べんきょう" },
  { id:"learn", en:"learn", jp:"学ぶ", hira:"まなぶ" },
  { id:"practice", en:"practice", jp:"練習", hira:"れんしゅう" },
  { id:"success", en:"success", jp:"成功", hira:"せいこう" },
  { id:"focus", en:"focus", jp:"集中", hira:"しゅうちゅう" },
  { id:"motivation", en:"motivation", jp:"やる気", hira:"やるき" }
];

// -------------------- Utilities --------------------
const $ = s => document.querySelector(s);
const board = $('#board');
const movesEl = $('#moves');
const pairsEl = $('#pairs');
const timerEl = $('#timer');
const progressEl = $('#progress');
const ghost = document.querySelector('.ghost');
const confettiLayer = $('#confetti');
const toast = $('#toast');

let soundOn = true;
let timer=0, timerId=null, moves=0, pairs=0, maxPairs=VOCAB.length; 
let first=null, second=null, lock=false; 

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
function pad(n){return String(n).padStart(2,'0')}

// -------------------- Sounds (WebAudio, tiny + fast) --------------------
let actx=null; function ctx(){return actx||(actx=new (window.AudioContext||window.webkitAudioContext)())}
function beep(type='ok', dur=0.08){ if(!soundOn) return; const c=ctx(); const o=c.createOscillator(); const g=c.createGain();
  const now=c.currentTime; o.type='sine';
  if(type==='ok'){ o.frequency.setValueAtTime(880,now); o.frequency.exponentialRampToValueAtTime(1320, now+dur) }
  if(type==='no'){ o.frequency.setValueAtTime(220,now); o.frequency.exponentialRampToValueAtTime(140, now+dur) }
  if(type==='flip'){ o.frequency.setValueAtTime(560,now); o.frequency.exponentialRampToValueAtTime(420, now+dur*.8) }
  g.gain.setValueAtTime(.0001,now); g.gain.exponentialRampToValueAtTime(.2, now+0.01); g.gain.exponentialRampToValueAtTime(.0001, now+dur);
  o.connect(g).connect(c.destination); o.start(); o.stop(now+dur)
}

// -------------------- Confetti --------------------
function burstConfetti(x=window.innerWidth/2,y=window.innerHeight/2,count=50){
  const frag=document.createDocumentFragment();
  for(let i=0;i<count;i++){
    const p=document.createElement('i');
    const size=6+Math.random()*6; p.style.width=size+'px'; p.style.height=(size*1.4)+'px';
    const left=x+(Math.random()*120-60); const top=y+(Math.random()*40-20);
    p.style.left=left+'px'; p.style.top=top+'px';
    const rotate=Math.random()*360; const dr = (Math.random()>.5?1:-1)*(2+Math.random()*4);
    const hue=[280,190,160,40][Math.floor(Math.random()*4)];
    p.style.background=`hsl(${hue} 90% 60%)`;
    p.animate([
      { transform:`translateY(0) rotate(${rotate}deg)`, opacity:1 },
      { transform:`translateY(${140+Math.random()*200}px) rotate(${rotate+dr*50}deg)`, opacity:0.8 }
    ], { duration:700+Math.random()*400, easing:'cubic-bezier(.2,.6,.2,1)', fill:'forwards' });
    frag.appendChild(p);
  }
  confettiLayer.appendChild(frag);
  setTimeout(()=>{confettiLayer.innerHTML=''},1200);
}

function showToast(msg){ toast.textContent=msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1200) }

// -------------------- Build Deck --------------------
function buildDeck(){
  const enCards = VOCAB.map(v=>({type:'en', id:v.id, label:v.en}));
  const jpCards = VOCAB.map(v=>({type:'jp', id:v.id, label:v.jp, hira:v.hira}));
  return shuffle([...enCards, ...jpCards]);
}

// -------------------- Render --------------------
function render(){
  const deck=buildDeck();
  board.innerHTML='';
  deck.forEach((c,idx)=>{
    const el=document.createElement('div');
    el.className='card'; el.dataset.id=c.id; el.dataset.type=c.type; el.dataset.index=idx;
    el.innerHTML=`
      <div class="face front"></div>
      <div class="face back">${ c.type==='en'
        ? `<div class="enText">${c.label}</div>`
        : `<div class="jpBox"><div class="jp">${c.label}</div><div class="hira">(${c.hira})</div></div>`
      }</div>`;
    el.addEventListener('click',()=>onFlip(el));
    board.appendChild(el);
  });
}

// -------------------- Game State --------------------
function reset(){
  moves=0; pairs=0; updateHUD(); render();
  clearInterval(timerId); timer=0; timerEl.textContent='Time: 0:00';
  timerId=setInterval(()=>{timer++; const m=Math.floor(timer/60), s=timer%60; timerEl.textContent=`Time: ${m}:${pad(s)}`},1000);
  ghost.classList.remove('happy','sad'); progressEl.style.transform='scaleX(0)';
}

function updateHUD(){
  movesEl.textContent=`Moves: ${moves}`;
  pairsEl.textContent=`Pairs: ${pairs} / ${maxPairs}`;
  progressEl.style.transform=`scaleX(${pairs/maxPairs})`;
}

function onFlip(card){
  if(lock || card.classList.contains('flipped') || card.classList.contains('matched')) return;
  beep('flip');
  card.classList.add('flipped');
  if(!first){ first=card; return }
  second=card; moves++; updateHUD();
  const isMatch = first.dataset.id===second.dataset.id && first.dataset.type!==second.dataset.type;
  lock=true;
  if(isMatch){
    setTimeout(()=>{
      first.classList.add('matched');
      second.classList.add('matched');
      pairs++; updateHUD();
      ghost.classList.add('happy'); setTimeout(()=>ghost.classList.remove('happy'),400);
      const rect=second.getBoundingClientRect(); burstConfetti(rect.left+rect.width/2, rect.top+rect.height/2, 36);
      beep('ok', .12);
      first=null; second=null; lock=false;
      if(pairs===maxPairs){
        burstConfetti(window.innerWidth/2, window.innerHeight/2, 160);
        showToast('できた！ Completed!');
        clearInterval(timerId);
      }
    },220);
  }else{
    ghost.classList.add('sad'); setTimeout(()=>ghost.classList.remove('sad'),300);
    beep('no', .1);
    setTimeout(()=>{
      first.classList.remove('flipped');
      second.classList.remove('flipped');
      first=null; second=null; lock=false;
    },650);
  }
}

// -------------------- Controls --------------------
$('#newGame').addEventListener('click',()=>{ reset(); showToast('New game!') });
$('#revealAll').addEventListener('click',()=>{
  const cards=[...document.querySelectorAll('.card')];
  cards.forEach(c=>c.classList.add('flipped'));
  setTimeout(()=>cards.forEach(c=>c.classList.remove('flipped')), 3000);
});
$('#soundToggle').addEventListener('click',e=>{ soundOn=!soundOn; e.target.textContent = `Sound: ${soundOn? 'On':'Off'}`; showToast(soundOn?'Sound on':'Sound off') })

// -------------------- Start --------------------
reset();
</script>
</body>
</html>
